{% comment %}
Template reutilizable para mostrar productos en formato tarjeta.
Usado en product_list.html, home (destacados), search_results.html.
Muestra botones:
- View details (primary / rosa)
- Add to cart (secondary / blanco)
{% endcomment %}

{% load static i18n %}
{% load humanize %}
<div class="product-grid">
  {% for product in products %}
    <div class="product-card">
      
    <!-- Imagen del producto -->
    <a href="{% url 'products:product_detail' product.id %}" class="product-media">
      {% if product.image %}
        <img src="{{ product.image.url }}" alt="{{ product.name }}">
      {% elif product.image_url %}
        <img src="{{ product.image_url }}" alt="{{ product.name }}">
      {% else %}
        <img src="{% static 'img/no-image.png' %}" alt="{% trans 'Sin imagen' %}">
      {% endif %}
    </a>

      <!-- Informaci칩n -->
      <div class="product-body">
        <h3 class="product-title">{{ product.name }}</h3>
        <p class="product-price">${{ product.price|floatformat:0|intcomma }}</p>

        <!-- Acciones -->
        <div class="bb-actions" style="display:flex; flex-wrap:wrap; gap:8px; align-items:flex-start;">

          <!-- Bot칩n principal (rosa): Ver detalles -->
          <a
            href="{% url 'products:product_detail' product.id %}"
            class="bb-btn primary"
            style="text-decoration:none;"
          >
            {% trans "Ver detalles" %}
          </a>

          <!-- Bot칩n secundario (blanco): A침adir al carrito -->
          <form
            method="post"
            action="{% url 'orders:add_to_cart' product.id %}"
            style="display:inline; margin:0;"
          >
            {% csrf_token %}
            <input type="hidden" name="quantity" value="1">
            <button
              type="submit"
              class="bb-btn secondary"
            >
              {% trans "Agregar al carrito" %}
            </button>
          </form>

        </div>
      </div>
    </div>
  {% empty %}
    <p>{% trans "No hay productos disponibles." %}</p>
  {% endfor %}
</div>
