<!--
Autor: Maria Clara Medina Gomez
Proyecto: BloomBerry
Archivo: templates/base.html
Descripción: Layout base del sitio (bloques, carga de static, navegación, traducción).
-->

{% load static i18n %}

<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8">
    <title>{% block title %}BloomBerry{% endblock %}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="{% static 'css/main.css' %}" rel="stylesheet">
  </head>
  <body>
    <header>
      <nav>
        <!-- Inicio / Productos -->
        <a href="{% url 'products:home' %}">{% trans "Inicio" %}</a>

        <!-- Login / Logout -->
        {% if user.is_authenticated %}
          <a href="{% url 'logout' %}">{% trans "Salir" %}</a>
          <a href="{% url 'users:profile' %}">{% trans "Mi Perfil" %}</a>
          <span>{% trans "Hola," %} {{ user.username }}</span>

          {% if user.is_staff %}
            <a href="{% url 'users:admin_dashboard' %}">{% trans "Panel Admin" %}</a>
          {% endif %}
        {% else %}
          <a href="{% url 'login' %}">{% trans "Ingresar" %}</a>
          <a href="{% url 'users:register' %}">{% trans "Registrarse" %}</a>
        {% endif %}

        <!-- Secciones principales -->
        <a href="{% url 'orders:home' %}">{% trans "Pedidos" %}</a>
        <a href="{% url 'payments:home' %}">{% trans "Pagos" %}</a>
        <a href="{% url 'chat:home' %}">{% trans "Chat" %}</a>

        <!-- Selector de idioma -->
        <form action="{% url 'set_language' %}" method="post" style="display:inline;">
          {% csrf_token %}
          <select name="language" onchange="this.form.submit()">
            {% get_current_language as LANGUAGE_CODE %}
            {% get_available_languages as LANGUAGES %}
            {% for lang_code, lang_name in LANGUAGES %}
              <option value="{{ lang_code }}" {% if lang_code == LANGUAGE_CODE %}selected{% endif %}>
                {{ lang_name }}
              </option>
            {% endfor %}
          </select>
        </form>
      </nav>
    </header>

    <main>
      {% block content %}{% endblock %}
    </main>

    <footer>
      <small>© BloomBerry</small>
    </footer>
  </body>
</html>
