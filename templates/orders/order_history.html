{% extends "base.html" %}
{% load static i18n %}

{% block title %}{% trans "Historial de compras" %}{% endblock %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/order_history.css' %}">
<div class="bb-order-history">
  <h2>{% trans "Historial de compras" %}</h2>

  {% if orders %}
    <table class="bb-table">
      <thead>
        <tr>
          <th>{% trans "Orden" %}</th>
          <th>{% trans "Fecha" %}</th>
          <th>{% trans "Estado" %}</th>
          <th>{% trans "Total" %}</th>
          <th>{% trans "Factura" %}</th>   
        </tr>
      </thead>
      <tbody>
        {% for order in orders %}
          <tr>
            <td>#{{ order.id }}</td>
            <td>{{ order.created_at|date:"d/m/Y H:i" }}</td>
            <td>{{ order.get_status_display }}</td>
            <td>${{ order.total|floatformat:2 }}</td>
            <td>
              <a href="{% url 'orders:invoice_format' order.id 'pdf' %}" class="btn btn-primary">{% trans "Descargar PDF" %}</a>
              <a href="{% url 'orders:invoice_format' order.id 'excel' %}" class="btn btn-outline-primary">{% trans "Descargar Excel" %}</a>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p>{% trans "No tienes compras registradas a√∫n." %}</p>
  {% endif %}
</div>
{% endblock %}
